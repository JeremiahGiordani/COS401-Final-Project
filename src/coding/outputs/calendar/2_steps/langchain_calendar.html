<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weekly Calendar</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #f0f0f0;
        }

        #calendar {
            display: grid;
            grid-template-rows: auto 1fr;
            grid-template-columns: repeat(5, 1fr);
            gap: 1px;
            width: 90%;
            max-width: 1200px;
            background-color: #fff;
            border: 1px solid #ddd;
        }

        .header {
            display: contents;
        }

        .day {
            background-color: #f0f0f0;
            text-align: center;
            padding: 10px;
            font-weight: bold;
        }

        .grid {
            display: contents;
        }

        .time-slot {
            border: 1px solid #ddd;
            height: 30px;
            position: relative;
        }

        .event {
            background-color: #4caf50;
            color: white;
            position: absolute;
            width: 100%;
            box-sizing: border-box;
            padding: 2px;
            cursor: pointer;
        }

        .highlight {
            background-color: rgba(76, 175, 80, 0.3);
        }

        .popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: white;
            padding: 20px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            display: none;
        }

        .popup input {
            width: 100%;
            padding: 10px;
            margin-bottom: 10px;
        }

        .popup button {
            padding: 10px;
            background-color: #4caf50;
            color: white;
            border: none;
            cursor: pointer;
        }

        .popup button.cancel {
            background-color: #f44336;
        }
    </style>
</head>
<body>
    <div id="calendar">
        <div class="header">
            <div class="day">Monday</div>
            <div class="day">Tuesday</div>
            <div class="day">Wednesday</div>
            <div class="day">Thursday</div>
            <div class="day">Friday</div>
        </div>
        <div class="grid">
            <!-- Time slots will be dynamically generated here -->
        </div>
    </div>

    <div class="popup" id="eventPopup">
        <input type="text" id="eventName" placeholder="Event Name">
        <button id="saveEvent">Save</button>
        <button class="cancel" id="cancelEvent">Cancel</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const calendar = document.querySelector('#calendar .grid');
            const days = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday'];
            const timeSlots = [];

            for (let i = 9; i < 17; i++) {
                timeSlots.push(`${i}:00`, `${i}:30`);
            }

            days.forEach((day, dayIndex) => {
                timeSlots.forEach((time, timeIndex) => {
                    const slot = document.createElement('div');
                    slot.classList.add('time-slot');
                    slot.dataset.day = dayIndex;
                    slot.dataset.time = time;
                    calendar.appendChild(slot);
                });
            });

            let isDragging = false;
            let startSlot = null;
            let endSlot = null;

            calendar.addEventListener('mousedown', (e) => {
                if (e.target.classList.contains('time-slot')) {
                    isDragging = true;
                    startSlot = e.target;
                    highlightSlots(startSlot, startSlot);
                }
            });

            calendar.addEventListener('mousemove', (e) => {
                if (isDragging && e.target.classList.contains('time-slot')) {
                    endSlot = e.target;
                    highlightSlots(startSlot, endSlot);
                }
            });

            calendar.addEventListener('mouseup', (e) => {
                if (isDragging) {
                    isDragging = false;
                    showPopup(startSlot, endSlot);
                    clearHighlights();
                }
            });

            function highlightSlots(start, end) {
                clearHighlights();
                const startDay = parseInt(start.dataset.day);
                const endDay = parseInt(end.dataset.day);
                const startTime = timeSlots.indexOf(start.dataset.time);
                const endTime = timeSlots.indexOf(end.dataset.time);

                for (let day = startDay; day <= endDay; day++) {
                    for (let time = startTime; time <= endTime; time++) {
                        const slot = calendar.querySelector(`.time-slot[data-day="${day}"][data-time="${timeSlots[time]}"]`);
                        if (slot) {
                            slot.classList.add('highlight');
                        }
                    }
                }
            }

            function clearHighlights() {
                document.querySelectorAll('.highlight').forEach(slot => {
                    slot.classList.remove('highlight');
                });
            }

            function showPopup(start, end) {
                const popup = document.getElementById('eventPopup');
                popup.style.display = 'block';

                document.getElementById('saveEvent').onclick = () => {
                    createEvent(start, end, document.getElementById('eventName').value);
                    popup.style.display = 'none';
                    document.getElementById('eventName').value = '';
                };

                document.getElementById('cancelEvent').onclick = () => {
                    popup.style.display = 'none';
                    document.getElementById('eventName').value = '';
                };
            }

            function createEvent(start, end, name) {
                const event = document.createElement('div');
                event.classList.add('event');
                event.textContent = `${name} (${start.dataset.time} - ${end.dataset.time})`;
                event.style.top = start.offsetTop + 'px';
                event.style.height = (end.offsetTop - start.offsetTop + start.offsetHeight) + 'px';
                event.dataset.day = start.dataset.day;
                event.dataset.startTime = start.dataset.time;
                event.dataset.endTime = end.dataset.time;

                event.addEventListener('click', () => {
                    if (confirm('Delete this event?')) {
                        event.remove();
                    }
                });

                calendar.appendChild(event);
            }
        });
    </script>
</body>
</html>