<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weekly Calendar</title>
    <style>
        body {
            font-family: Arial, sans-serif;
        }

        #calendar {
            display: grid;
            grid-template-columns: 100px repeat(5, 1fr);
            grid-template-rows: 50px repeat(16, 40px); /* 30 min slots from 9 AM to 5 PM */
            gap: 1px;
            width: 100%;
            max-width: 900px;
            margin: 0 auto;
        }

        #time-slots {
            grid-column: 1 / 2;
            grid-row: 1 / -1;
            display: flex;
            flex-direction: column;
        }

        .time-slot {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 1px solid #ddd;
            background: #f4f4f4;
        }

        #weekdays {
            grid-column: 2 / -1;
            display: grid;
            grid-template-columns: repeat(5, 1fr);
        }

        .day-column {
            position: relative;
        }

        .weekday {
            display: flex;
            align-items: center;
            justify-content: center;
            background: #e0e0e0;
            border: 1px solid #ddd;
            height: 50px;
            font-weight: bold;
        }

        .calendar-slot {
            height: 40px;
            border: 1px solid #ddd;
            background-color: #ffffff;
            position: relative;
        }

        .calendar-slot.highlight {
            background-color: #cce5ff;
        }

        .event {
            position: absolute;
            background: #4CAF50;
            color: #fff;
            padding: 5px;
            border-radius: 4px;
            overflow: hidden;
            cursor: pointer;
            box-sizing: border-box;
        }

        .event:hover {
            background: #45a049;
        }
    </style>
</head>
<body>

    <h1 style="text-align: center;">Weekly Calendar</h1>
    <div id="calendar">
        <div id="time-slots"></div>
        <div id="weekdays"></div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const timeSlotsElement = document.getElementById('time-slots');
            const weekdaysElement = document.getElementById('weekdays');
            const days = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday'];
            const startTime = 9;
            const endTime = 17;

            // Generate the time slots
            for (let h = startTime; h <= endTime; h++) {
                for (let m = 0; m < 60; m+=30) {
                    const timeSlot = document.createElement('div');
                    timeSlot.className = 'time-slot';
                    timeSlot.textContent = formatTime(h, m);
                    timeSlotsElement.appendChild(timeSlot);
                }
            }

            // Generate the weekdays and time slots
            days.forEach(day => {
                const dayColumn = document.createElement('div');
                dayColumn.className = 'day-column';
                weekdaysElement.appendChild(dayColumn);
                
                const weekday = document.createElement('div');
                weekday.className = 'weekday';
                weekday.textContent = day;
                dayColumn.appendChild(weekday);

                for (let i = 0; i < 16; i++) {
                    const timeSlot = document.createElement('div');
                    timeSlot.className = 'calendar-slot';
                    dayColumn.appendChild(timeSlot);
                }
            });

            function formatTime(h, m) {
                const ampm = h >= 12 ? 'PM' : 'AM';
                const formattedHour = h % 12 || 12;
                const formattedMinutes = m === 0 ? '00' : m;
                return `${formattedHour}:${formattedMinutes} ${ampm}`;
            }

            // Handle click-and-drag to create event blocks
            let isMouseDown = false;
            let startSlot, endSlot;

            document.getElementById('calendar').addEventListener('mousedown', (e) => {
                if(e.target.classList.contains('calendar-slot')) {
                    isMouseDown = true;
                    startSlot = e.target;
                    startSlot.classList.add('selected');
                }
            });

            document.getElementById('calendar').addEventListener('mousemove', (e) => {
                if(isMouseDown && e.target.classList.contains('calendar-slot')) {
                    endSlot = e.target;
                    highlightRange(startSlot, endSlot);
                }
            });

            document.getElementById('calendar').addEventListener('mouseup', (e) => {
                if(isMouseDown) {
                    isMouseDown = false;
                    
                    if (!startSlot || !endSlot) return;

                    const eventName = prompt("Enter event name:");
                    if(eventName) {
                        const eventBlock = document.createElement('div');
                        eventBlock.className = 'event';
                        eventBlock.textContent = `${eventName}\n${getEventTimeRange(startSlot, endSlot)}`;
                        const dayColumn = startSlot.parentElement;
                        dayColumn.appendChild(eventBlock);

                        let startIndex = Array.from(dayColumn.children).indexOf(startSlot);
                        let endIndex = Array.from(dayColumn.children).indexOf(endSlot);
                        eventBlock.style.top = (startIndex * 40) + 'px';
                        eventBlock.style.height = ((endIndex - startIndex + 1) * 40) + 'px';

                        resetSlots(dayColumn);
                    } else {
                        resetSlots(startSlot.parentElement);
                    }
                }
            });

            document.getElementById('calendar').addEventListener('click', (e) => {
                if(e.target.classList.contains('event')) {
                    if(confirm('Are you sure you want to delete this event?')) {
                        e.target.remove();
                    }
                }
            });

            function highlightRange(start, end) {
                const dayColumn = start.parentElement;
                resetSlots(dayColumn);
                let startIndex = Array.from(dayColumn.children).indexOf(start);
                let endIndex = Array.from(dayColumn.children).indexOf(end);
                for(let i = Math.min(startIndex, endIndex); i <= Math.max(startIndex, endIndex); i++) {
                    dayColumn.children[i].classList.add('highlight');
                }
            }

            function resetSlots(dayColumn) {
                Array.from(dayColumn.children).forEach(slot => {
                    slot.classList.remove('selected', 'highlight');
                });
            }

            function getEventTimeRange(start, end) {
                const dayColumn = start.parentElement;
                let startIndex = Array.from(dayColumn.children).indexOf(start);
                let endIndex = Array.from(dayColumn.children).indexOf(end);
                const startTime = startSlot.previousElementSibling.textContent;
                const endTime = endSlot.previousElementSibling.textContent;
                return `${startTime} - ${endTime}`;
            }
        });
    </script>
</body>
</html>