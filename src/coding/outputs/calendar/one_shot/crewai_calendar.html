<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weekly Calendar</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .calendar-container {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 1px;
            margin-top: 20px;
            width: 80%;
        }
        .day-column {
            border: 1px solid #ccc;
            position: relative;
        }
        .time-slot {
            height: 30px;
            border-bottom: 1px solid #ddd;
            position: relative;
        }
        .time-slot:last-child {
            border-bottom: none;
        }
        .header {
            background: #f0f0f0;
            text-align: center;
            padding: 10px;
            position: sticky;
            top: 0;
            border-bottom: 1px solid #ccc;
        }
        .event {
            background: #4caf50;
            color: white;
            position: absolute;
            width: calc(100% - 10px);
            margin-left: 5px;
            cursor: pointer;
            padding: 5px;
            box-sizing: border-box;
        }
        .event span {
            display: block;
        }
    </style>
</head>
<body>
    <h1>Weekly Calendar</h1>
    <div class="calendar-container">
        <div class="header">Monday</div>
        <div class="header">Tuesday</div>
        <div class="header">Wednesday</div>
        <div class="header">Thursday</div>
        <div class="header">Friday</div>
        <div class="day-column" id="monday"></div>
        <div class="day-column" id="tuesday"></div>
        <div class="day-column" id="wednesday"></div>
        <div class="day-column" id="thursday"></div>
        <div class="day-column" id="friday"></div>
    </div>
    <script>
        const days = ['monday', 'tuesday', 'wednesday', 'thursday', 'friday'];
        const timeSlots = [];
        for (let i = 9; i < 17; i++) {
            timeSlots.push(`${i}:00`, `${i}:30`);
        }
        
        days.forEach(day => {
            const dayColumn = document.getElementById(day);
            timeSlots.forEach(time => {
                const timeSlotDiv = document.createElement('div');
                timeSlotDiv.classList.add('time-slot');
                timeSlotDiv.dataset.time = time;
                dayColumn.appendChild(timeSlotDiv);
            });
        });

        let isDragging = false;
        let startSlot = null;
        let endSlot = null;
        let currentEvent = null;

        document.querySelectorAll('.day-column').forEach(dayColumn => {
            dayColumn.addEventListener('mousedown', (e) => {
                if (e.target.classList.contains('time-slot')) {
                    isDragging = true;
                    startSlot = e.target;
                    currentEvent = document.createElement('div');
                    currentEvent.classList.add('event');
                    dayColumn.appendChild(currentEvent);
                }
            });

            dayColumn.addEventListener('mousemove', (e) => {
                if (isDragging && e.target.classList.contains('time-slot')) {
                    endSlot = e.target;
                    const startIndex = [...dayColumn.children].indexOf(startSlot);
                    const endIndex = [...dayColumn.children].indexOf(endSlot);
                    const earliest = Math.min(startIndex, endIndex);
                    const latest = Math.max(startIndex, endIndex);
                    const startTime = new Date(0, 0, 0, 9 + Math.floor(earliest / 2), (earliest % 2) * 30).toLocaleTimeString([], {hour: '2-digit', minute: '2-digit'});
                    const endTime = new Date(0, 0, 0, 9 + Math.ceil(latest / 2), (latest % 2 ? 0 : 30)).toLocaleTimeString([], {hour: '2-digit', minute: '2-digit'});

                    currentEvent.style.top = `${startSlot.offsetTop}px`;
                    currentEvent.style.height = `${(latest - earliest + 1) * 30}px`;
                    currentEvent.innerHTML = `<span>${startTime} â€“ ${endTime}</span>`;
                }
            });

            dayColumn.addEventListener('mouseup', () => {
                isDragging = false;
                currentEvent = null;
            });

            dayColumn.addEventListener('click', (e) => {
                if (e.target.classList.contains('event')) {
                    if (confirm('Do you want to delete this event?')) {
                        e.target.remove();
                    }
                }
            });
        });

        window.addEventListener('mouseup', () => {
            isDragging = false;
        });
    </script>
</body>
</html>