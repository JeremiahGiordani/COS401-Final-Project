<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Weekly Calendar</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            margin: 0;
        }

        .calendar {
            display: grid;
            grid-template-columns: 50px repeat(5, 1fr);
            grid-template-rows: 30px repeat(16, 40px);
            gap: 1px;
            margin-top: 20px;
        }

        .calendar .time-slot {
            background: #f0f0f0;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .calendar .day-header {
            background: #ccc;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .calendar .event {
            position: absolute;
            background: #87ceeb;
            border-radius: 5px;
            color: white;
            display: flex;
            align-items: center;
            padding: 2px 5px;
            cursor: pointer;
        }
    </style>
</head>
<body>
<div class="calendar">
    <div></div> <!-- empty top-left corner -->
    <div class="day-header">Monday</div>
    <div class="day-header">Tuesday</div>
    <div class="day-header">Wednesday</div>
    <div class="day-header">Thursday</div>
    <div class="day-header">Friday</div>

    <div class="time-slot">9:00</div>
    <div class="time-slot"> </div>
    <div class="time-slot"> </div>
    <div class="time-slot"> </div>
    <div class="time-slot"> </div>
    <div class="time-slot"> </div>

    <div class="time-slot">9:30</div>
    <div class="time-slot"> </div>
    <div class="time-slot"> </div>
    <div class="time-slot"> </div>
    <div class="time-slot"> </div>
    <div class="time-slot"> </div>

    <div class="time-slot">10:00</div>
    <div class="time-slot"> </div>
    <div class="time-slot"> </div>
    <div class="time-slot"> </div>
    <div class="time-slot"> </div>
    <div class="time-slot"> </div>

    <div class="time-slot">10:30</div>
    <div class="time-slot"> </div>
    <div class="time-slot"> </div>
    <div class="time-slot"> </div>
    <div class="time-slot"> </div>
    <div class="time-slot"> </div>

    <div class="time-slot">11:00</div>
    <div class="time-slot"> </div>
    <div class="time-slot"> </div>
    <div class="time-slot"> </div>
    <div class="time-slot"> </div>
    <div class="time-slot"> </div>

    <div class="time-slot">11:30</div>
    <div class="time-slot"> </div>
    <div class="time-slot"> </div>
    <div class="time-slot"> </div>
    <div class="time-slot"> </div>
    <div class="time-slot"> </div>

    <div class="time-slot">12:00</div>
    <div class="time-slot"> </div>
    <div class="time-slot"> </div>
    <div class="time-slot"> </div>
    <div class="time-slot"> </div>
    <div class="time-slot"> </div>

    <div class="time-slot">12:30</div>
    <div class="time-slot"> </div>
    <div class="time-slot"> </div>
    <div class="time-slot"> </div>
    <div class="time-slot"> </div>
    <div class="time-slot"> </div>

    <div class="time-slot">1:00</div>
    <div class="time-slot"> </div>
    <div class="time-slot"> </div>
    <div class="time-slot"> </div>
    <div class="time-slot"> </div>
    <div class="time-slot"> </div>

    <div class="time-slot">1:30</div>
    <div class="time-slot"> </div>
    <div class="time-slot"> </div>
    <div class="time-slot"> </div>
    <div class="time-slot"> </div>
    <div class="time-slot"> </div>

    <div class="time-slot">2:00</div>
    <div class="time-slot"> </div>
    <div class="time-slot"> </div>
    <div class="time-slot"> </div>
    <div class="time-slot"> </div>
    <div class="time-slot"> </div>

    <div class="time-slot">2:30</div>
    <div class="time-slot"> </div>
    <div class="time-slot"> </div>
    <div class="time-slot"> </div>
    <div class="time-slot"> </div>
    <div class="time-slot"> </div>

    <div class="time-slot">3:00</div>
    <div class="time-slot"> </div>
    <div class="time-slot"> </div>
    <div class="time-slot"> </div>
    <div class="time-slot"> </div>
    <div class="time-slot"> </div>

    <div class="time-slot">3:30</div>
    <div class="time-slot"> </div>
    <div class="time-slot"> </div>
    <div class="time-slot"> </div>
    <div class="time-slot"> </div>
    <div class="time-slot"> </div>

    <div class="time-slot">4:00</div>
    <div class="time-slot"> </div>
    <div class="time-slot"> </div>
    <div class="time-slot"> </div>
    <div class="time-slot"> </div>
    <div class="time-slot"> </div>

    <div class="time-slot">4:30</div>
    <div class="time-slot"> </div>
    <div class="time-slot"> </div>
    <div class="time-slot"> </div>
    <div class="time-slot"> </div>
    <div class="time-slot"> </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const calendar = document.querySelector('.calendar');
        let isDragging = false;
        let startCell = null;

        calendar.addEventListener('mousedown', (e) => {
            if (e.target.classList.contains('time-slot')) {
                isDragging = true;
                startCell = e.target;
                e.preventDefault();
            }
        });

        calendar.addEventListener('mousemove', (e) => {
            if (isDragging) {
                const endCell = e.target;
                if (endCell !== startCell && endCell.classList.contains('time-slot')) {
                    const selectedSlots = getSelectedSlots(startCell, endCell);
                    clearSelection();
                    selectedSlots.forEach(slot => slot.classList.add('selected'));
                }
            }
        });

        calendar.addEventListener('mouseup', (e) => {
            if (isDragging) {
                const endCell = e.target;
                const selectedSlots = getSelectedSlots(startCell, endCell);
                if (selectedSlots.length > 0) {
                    createEvent(selectedSlots);
                }
                clearSelection();
                isDragging = false;
                startCell = null;
            }
        });

        function getSelectedSlots(start, end) {
            const startIndex = [...calendar.children].indexOf(start);
            const endIndex = [...calendar.children].indexOf(end);

            const startRow = Math.floor(startIndex / 6);
            const endRow = Math.floor(endIndex / 6);
            const startCol = startIndex % 6;
            const endCol = endIndex % 6;

            if (startCol !== endCol) return [];

            const minRow = Math.min(startRow, endRow);
            const maxRow = Math.max(startRow, endRow);

            const selectedSlots = [];
            for (let i = minRow; i <= maxRow; i++) {
                selectedSlots.push(calendar.children[i * 6 + startCol]);
            }
            return selectedSlots;
        }

        function createEvent(slots) {
            const firstSlot = slots[0];
            const lastSlot = slots[slots.length - 1];
            const event = document.createElement('div');
            event.classList.add('event');
            event.style.gridRowStart = Math.floor([...calendar.children].indexOf(firstSlot) / 6) + 2;
            event.style.gridRowEnd = Math.floor([...calendar.children].indexOf(lastSlot) / 6) + 3;
            event.textContent = formatTime(firstSlot.textContent) + ' â€“ ' + formatTime(lastSlot.textContent);
            event.addEventListener('click', (e) => {
                const confirmDelete = confirm('Do you want to delete this event?');
                if (confirmDelete) {
                    event.remove();
                }
            });
            calendar.appendChild(event);
        }

        function clearSelection() {
            [...calendar.querySelectorAll('.selected')].forEach(slot => slot.classList.remove('selected'));
        }

        function formatTime(timeText) {
            if (timeText.trim() === '') return '';
            const [hour, minute] = timeText.split(':').map(Number);
            const period = hour < 12 ? 'AM' : 'PM';
            const formattedHour = ((hour % 12) || 12);
            return `${formattedHour}:${minute < 10 ? '0' + minute : minute} ${period}`;
        }
    });
</script>
</body>
</html>